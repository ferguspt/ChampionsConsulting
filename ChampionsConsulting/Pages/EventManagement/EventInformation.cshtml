@page
@using System.Data.SqlClient
@using ChampionsConsulting.Pages.DB
@model ChampionsConsulting.Pages.EventManagement.EventInformationModel
@{
}

<style>
    body {
        font-family: 'Arial', sans-serif;
        color: #333;
        line-height: 1.6;
        background-image: linear-gradient(#f048c6, #f6ea41 );
        font-family: Verdana, sans-serif;
        margin: 0
    }

    footer {
        position: fixed;
        bottom: 0;
        width: 100%;
        min-height: 50px;
        max-height: 80px;
        background-color: rgba(36, 32, 33, 0.9);
        color: white;
        font-family: "Helvetica Neue", Helvetica;
        padding: 10px 0px;
        padding-top: 10px;
        margin-top: 30px;
        font-weight: 100;
        clear: both;
    }
</style>
@if (HttpContext.Session.GetString("Username") == null || HttpContext.Session.GetString("UserType") != "Organizer")
{
    <h2 class="center">Authorized Users only!</h2>
}
else
{
<h2 class="h2">Events:</h2>

<table class="table table-bordered table-responsive table-striped table-hover">

    <thead class="table-dark">

        <tr>

            <th>Name:</th>

            <th>Description:</th>

            <th>StartDateAndTime:</th>

            <th>EndDateAndTime:</th>

            <th>Location:</th>
            <th>Edit Event</th>
            <th>Delete Event</th>

        </tr>

    </thead>

    <tbody>

        @{
            string sqlQuery = "Select Name, Description, StartDateAndTime, EndDateAndTime, Place FROM Events Inner Join Location ON Events.LocationId = Location.LocationID;";

            SqlDataReader ConferenceReader = DBClass.EventReader(sqlQuery);

            while (ConferenceReader.Read())

            {

                <tr>

                    <td>@ConferenceReader["Name"]</td>

                    <td>@ConferenceReader["Description"]</td>

                    <td>@ConferenceReader["StartDateAndTime"]</td>

                    <td>@ConferenceReader["EndDateAndTime"]</td>

                    <td>@ConferenceReader["Place"]</td>

                    <td><a asp-page="/EventManagement/Edit">Edit</a></td>

                    <td><a asp-page="/EventManagement/Delete">Delete</a></td>

                    @*<td><button asp-page="EventInformation" button asp-page-handler="EditHandler" class="btn btn-primary">Edit</button></td>

                    <td><button asp-page="EventInformation" button asp-page-handler="DeleteHandler" class="btn btn-danger">Delete</button></td>*@
            
                    </tr>

                }
               
                DBClass.CCDBConnection.Close();

        }


    </tbody>

</table>
}
    